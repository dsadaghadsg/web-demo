(function(){function e(u,f){var e,o;return u==null||u===""?u:f.indexOf(t)>-1?(e=f.replace(t,"{0}"),o=r(u,t),e.format(o)):f.indexOf(i)>-1?(e=f.replace(i,"{0}"),o=r(u,i),e.format(o)):f.indexOf(n)>-1?(e=f.replace(n,"{0}"),o=r(u,n),e.format(o)):void 0}function r(r,u){return u===t?r.formatMoney(2,".",","):u===i?r.formatMoney(0,".",","):u===n?r.formatMoney(0,",","."):void 0}function o(n,t){try{var i=n.split("."),r=t.split("."),u=1e4*parseInt(i[0])+100*parseInt(i[1])+parseInt(i[2]),f=1e4*parseInt(r[0])+100*parseInt(r[1])+parseInt(r[2]);return u>f?1:u<f?-1:0}catch(e){console.log(e)}return 1}function f(n,t){var i=document.createElement("script");i.type="text/javascript";i.readyState?i.onreadystatechange=function(){(i.readyState=="loaded"||i.readyState=="complete")&&(i.onreadystatechange=null,t())}:i.onload=function(){t()};i.src=n;document.getElementsByTagName("head")[0].appendChild(i)}function s(n,t){var i;t=="js"?(i=document.createElement("script"),i.setAttribute("type","text/javascript"),i.setAttribute("src",n)):t=="css"&&(i=document.createElement("link"),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",n),i.setAttribute("media","all"));typeof i!="undefined"&&document.getElementsByTagName("head")[0].appendChild(i)}var n="{{amount_no_decimals_with_comma_separator}}",t="{{amount}}",i="{{amount_no_decimals}}",u;String.prototype.format||(String.prototype.format=function(){var n=arguments;return this.replace(/{(\d+)}/g,function(t,i){return typeof n[i]!="undefined"?n[i]:t})});Number.prototype.formatMoney||(Number.prototype.formatMoney=function(n,t,i){var u=this,n=isNaN(n=Math.abs(n))?2:n,t=t==undefined?".":t,i=i==undefined?",":i,e=u<0?"-":"",f=parseInt(u=Math.abs(+u||0).toFixed(n))+"",r=(r=f.length)>3?r%3:0;return e+(r?f.substr(0,r)+i:"")+f.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+i)+(n?t+Math.abs(u-f).toFixed(n).slice(2):"")});u={Script:function(n){var t=this,r,i;t.fjs=n("#product-recommend-app-jssdk").first();t.store="";t.domain="";t.template="";r="";i="";n(".product-id-in-cart").each(function(){i==""?i=n(this).html():i+=","+n(this).html()});t.getData=function(){try{t.store=Bizweb.store;t.domain=BizwebProductRecommendApp.domain}catch(n){return console.log(n.message),!1}return t.IsNullOrEmpty(t.domain)?!1:t.IsNullOrEmpty(t.store)?!1:!0};t.IsNullOrEmpty=function(n){return n==null||n==""?!0:!1};t.loadData=function(){var i={store:t.store,productId:BizwebProductRecommendApp.productId};n.ajax({url:t.domain+"frontend/getmoduledata",method:"GET",crossDomain:!0,dataType:"jsonp",data:i}).success(function(n){n.display&&n.display_in_details_product&&t.fillData(n)}).fail(function(){console.log("error!")})};t.loadDataInCart=function(){var r={store:t.store,listProductIds:i};console.log(r);n.ajax({url:t.domain+"frontend/getmoduledatapagecart",method:"GET",crossDomain:!0,dataType:"jsonp",data:r}).success(function(n){n.display&&n.display_in_page_cart&&t.fillData(n)}).fail(function(){console.log("error!")})};t.fillData=function(t){var f="",o="",r=t.product_recommends,u=t.module_config,i,s;if(r.length!=0){for(i=0;i<r.length;i++)if(f+='<div class="padding-item">',f+='<a class="product-recommend-link" href="/'+r[i].alias+'">',f+=' <div class="item">',f+='<img src="'+(r[i].image_src?r[i].image_src:"https://bizweb.dktcdn.net/assets/themes_support/noimage.gif")+'" alt="'+(r[i].image_alt?r[i].image_alt:r[i].name)+'"/>',f+="<\/div>",f+='<div class="product-recommend-name">'+r[i].name+"<\/div>",r[i].price=="0"&&t.price_replace_text!=""&&t.price_replace_text!=null?(o=t.price_replace_text,f+='<div class="product-recommend-price">'+o+"<\/div>"):(o=Bizweb?Bizweb.formatMoney(r[i].price,t.money_format):e(r[i].price,t.money_format),f+='<div class="product-recommend-price">'+o+"<\/div>"),f+="<\/a>",f+="<\/div>",i==11)break;n("#owl-product-recommend").append(f);n(".product-recommend-module-box").append('<input id="item_in_slider" value="'+u.items_per_slider+'" class="hidden" />');n(".product-recommend-module-title").text(t.module_title);n(".product-recommend-module-title").css({color:u.text_name_color,"text-align":u.text_align,"font-weight":u.is_text_bold?"bold":"normal","font-style":u.is_text_italic?"italic":"normal","font-size":u.text_size+"px"});n(".product-recommend-name").css({color:u.text_name_color});n(".product-recommend-price").css({color:u.text_price_color});n(".product-recommend-module-box").css({"border-color":u.border_color,"background-color":u.background_color});switch(u.items_per_slider){case 2:n("#owl-product-recommend .item").css("padding","10px");break;case 3:n("#owl-product-recommend .item").css("padding","10px");break;case 4:n("#owl-product-recommend .item").css("padding","10px");break;case 5:n("#owl-product-recommend .item").css("padding","10px");break;case 6:n("#owl-product-recommend .item").css("padding","5px")}n(".product-recommend-module-box").show();s=u.items_per_slider;n("#owl-product-recommend").owlCarousel({slideSpeed:200,paginationSpeed:!1,autoPlay:!1,goToFirst:!0,goToFirstSpeed:1e3,navigation:!1,navigationText:["prev","next"],pagination:!0,paginationNumbers:!1,responsive:!0,items:s,itemsDesktop:[1199,s],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsMobile:[479,1]})}};t.ProductRecommend=function(){t.template.indexOf("product")>=0&&t.loadData();t.template.indexOf("cart")>=0&&t.loadDataInCart()};t.init=function(){if(!t.getData())return!1;Bizweb!=null&&(t.template=Bizweb.template);s(t.domain+"Assets/css/bundle.min.css","css");f(t.domain+"Content/carousel-slider/js/owl.carousel.js",t.ProductRecommend)};t.init()}};typeof jQuery=="undefined"||o("1.7.0",jQuery.fn.jquery)>0?f("//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js",function(){var n=jQuery;u.Script(n)}):u.Script(jQuery)})();